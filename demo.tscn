[gd_scene load_steps=14 format=2]

[ext_resource path="res://textures/water_mask.png" type="Texture" id=1]
[ext_resource path="res://scenes/GridMap.tscn" type="PackedScene" id=2]
[ext_resource path="res://shaders/water_shader.shader" type="Shader" id=3]
[ext_resource path="res://demo.gd" type="Script" id=4]

[sub_resource type="ProceduralSky" id=124]

[sub_resource type="Environment" id=5]
background_mode = 1
background_sky = SubResource( 124 )
background_color = Color( 0.262745, 0.466667, 0.658824, 1 )
ambient_light_color = Color( 1, 1, 1, 1 )
fog_sun_amount = 1.0
fog_depth_begin = 0.0
fog_depth_curve = 0.112656
fog_transmit_curve = 0.164939
ssao_radius = 35.0
ssao_intensity = 113.1

[sub_resource type="GDScript" id=103]
script/source = "extends Spatial


var rot_speed = 10.0


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


func _process(delta):
	rotation_degrees.y += rot_speed * delta
"

[sub_resource type="PlaneMesh" id=105]
size = Vector2( 80, 80 )
subdivide_width = 150
subdivide_depth = 150

[sub_resource type="Gradient" id=125]
offsets = PoolRealArray( 0, 0.495017, 1 )
colors = PoolColorArray( 0.264, 0.4686, 0.66, 1, 0.268, 0.4757, 0.67, 1, 0.8036, 0.89474, 0.98, 1 )

[sub_resource type="GradientTexture" id=126]
gradient = SubResource( 125 )

[sub_resource type="OpenSimplexNoise" id=106]
period = 11.2
persistence = 0.475
lacunarity = 4.0

[sub_resource type="NoiseTexture" id=127]
noise = SubResource( 106 )

[sub_resource type="ShaderMaterial" id=107]
shader = ExtResource( 3 )
shader_param/tilingA = 10.0
shader_param/tilingB = 22.223
shader_param/scroll_speedA = Vector2( 0.017, 0 )
shader_param/scroll_speedB = Vector2( 0, 0.03 )
shader_param/noise_scale = 0.105
shader_param/noise_scale2 = 0.422
shader_param/displacement_amplitude = 0.155
shader_param/displacement_scroll_speed = 0.058
shader_param/test = 4.6
shader_param/test2 = 3.68
shader_param/test3 = 5.677
shader_param/mask = ExtResource( 1 )
shader_param/gradient = SubResource( 126 )
shader_param/noise = SubResource( 127 )

[node name="Demo" type="Node"]
script = ExtResource( 4 )
size = Vector3( 16, 3, 16 )

[node name="GridMap" parent="." instance=ExtResource( 2 )]
data = {
"cells": PoolIntArray( 2, 6, 1048578, 3, 6, 1048577, 4, 6, 2, 2, 7, 655361, 3, 7, 1048576, 4, 7, 3, 5, 7, 2, 2, 8, 655362, 3, 8, 1441793, 4, 8, 1441793, 5, 8, 1441794 )
}

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 5 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.781684, -0.488959, 0.387155, 0, 0.620765, 0.783997, -0.623675, -0.612838, 0.485242, 0, 0, 0 )
shadow_enabled = true
directional_shadow_blend_splits = true
directional_shadow_max_distance = 300.0

[node name="CamFocus" type="Spatial" parent="."]
script = SubResource( 103 )

[node name="RotatingCam" type="Camera" parent="CamFocus"]
transform = Transform( 1, 0, 0, 0, 0.783086, 0.621913, 0, -0.621913, 0.783086, 0, 14.3955, 19.3573 )
current = true
fov = 40.0

[node name="Sea" type="MeshInstance" parent="."]
transform = Transform( 2, 0, 0, 0, 0.5, 0, 0, 0, 2, -2, -0.114519, 2 )
mesh = SubResource( 105 )
material/0 = SubResource( 107 )
__meta__ = {
"_edit_lock_": true
}

[node name="ButtonGenerate" type="Button" parent="."]
margin_left = 14.0
margin_top = 15.0
margin_right = 124.0
margin_bottom = 48.0
text = "Generate"

[connection signal="pressed" from="ButtonGenerate" to="." method="_on_ButtonGenerate_pressed"]
